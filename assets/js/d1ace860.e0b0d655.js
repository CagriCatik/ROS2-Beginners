"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5611],{6627:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"topics/subscriber","title":"subscriber","description":"Creating a ROS2 Python Subscriber: A Comprehensive Guide","source":"@site/docs/03_topics/04_subscriber.md","sourceDirName":"03_topics","slug":"/topics/subscriber","permalink":"/docs/topics/subscriber","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03_topics/04_subscriber.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"publisher","permalink":"/docs/topics/publisher"},"next":{"title":"Services","permalink":"/docs/category/services"}}');var t=s(4848),r=s(8453);const o={},a=void 0,c={},d=[{value:"Creating a ROS2 Python Subscriber: A Comprehensive Guide",id:"creating-a-ros2-python-subscriber-a-comprehensive-guide",level:3},{value:"Prerequisites",id:"prerequisites",level:4},{value:"Step-by-Step Instructions",id:"step-by-step-instructions",level:4},{value:"1. Setting Up the Workspace",id:"1-setting-up-the-workspace",level:5},{value:"2. Creating the Subscriber Node",id:"2-creating-the-subscriber-node",level:5},{value:"3. Writing the Node Script",id:"3-writing-the-node-script",level:5},{value:"4. Modifying <code>setup.py</code>",id:"4-modifying-setuppy",level:5},{value:"5. Building the Workspace",id:"5-building-the-workspace",level:5},{value:"6. Running the Nodes",id:"6-running-the-nodes",level:5},{value:"7. Testing and Verification",id:"7-testing-and-verification",level:5},{value:"Conclusion",id:"conclusion",level:4}];function l(e){const n={code:"code",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"creating-a-ros2-python-subscriber-a-comprehensive-guide",children:"Creating a ROS2 Python Subscriber: A Comprehensive Guide"}),"\n",(0,t.jsx)(n.p,{children:"This tutorial provides a detailed walkthrough for creating a Python subscriber node in ROS2, designed to interact with a previously created radio station topic. The node, referred to as the smartphone node, will be equipped with various functionalities, including reading and publishing the battery state, sending text messages, and adjusting speaker volume. This tutorial focuses on the subscriber functionality of the smartphone node."}),"\n",(0,t.jsx)(n.h4,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Before proceeding, ensure you have the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A functioning ROS2 installation"}),"\n",(0,t.jsx)(n.li,{children:"A ROS2 workspace set up with a Python package where nodes are written"}),"\n",(0,t.jsx)(n.li,{children:"The necessary dependencies installed"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"step-by-step-instructions",children:"Step-by-Step Instructions"}),"\n",(0,t.jsx)(n.h5,{id:"1-setting-up-the-workspace",children:"1. Setting Up the Workspace"}),"\n",(0,t.jsx)(n.p,{children:"Navigate to the source folder of your ROS2 workspace and into your Python package directory."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src/my_python_package\n"})}),"\n",(0,t.jsx)(n.h5,{id:"2-creating-the-subscriber-node",children:"2. Creating the Subscriber Node"}),"\n",(0,t.jsx)(n.p,{children:"Create a new Python file for the smartphone node and make it executable."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"touch smartphone.py\nchmod +x smartphone.py\n"})}),"\n",(0,t.jsx)(n.h5,{id:"3-writing-the-node-script",children:"3. Writing the Node Script"}),"\n",(0,t.jsxs)(n.p,{children:["Open the ",(0,t.jsx)(n.code,{children:"smartphone.py"})," file in your preferred text editor and start by writing the basic structure of a ROS2 node."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.msg import String\n\nclass SmartphoneNode(Node):\n    def __init__(self):\n        super().__init__('smartphone')\n        self.get_logger().info('Smartphone node has been started.')\n      \n        # Creating the subscriber\n        self.subscriber = self.create_subscription(\n            String,\n            'robot_news',\n            self.callback_robot_news,\n            10\n        )\n\n    def callback_robot_news(self, msg):\n        self.get_logger().info(f'Received message: {msg.data}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = SmartphoneNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This script initializes the smartphone node, sets up a subscriber to listen to the ",(0,t.jsx)(n.code,{children:"robot_news"})," topic, and defines a callback function to handle incoming messages."]}),"\n",(0,t.jsxs)(n.h5,{id:"4-modifying-setuppy",children:["4. Modifying ",(0,t.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,t.jsxs)(n.p,{children:["Ensure your ",(0,t.jsx)(n.code,{children:"setup.py"})," includes the new node. Modify the entry points to include ",(0,t.jsx)(n.code,{children:"smartphone"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'smartphone = my_python_package.smartphone:main',\n    ],\n},\n"})}),"\n",(0,t.jsx)(n.h5,{id:"5-building-the-workspace",children:"5. Building the Workspace"}),"\n",(0,t.jsx)(n.p,{children:"Build your workspace to integrate the new node."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build\nsource install/setup.bash\n"})}),"\n",(0,t.jsx)(n.h5,{id:"6-running-the-nodes",children:"6. Running the Nodes"}),"\n",(0,t.jsx)(n.p,{children:"First, start the publisher node (robot news station) to ensure it is broadcasting messages."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 run my_python_package robot_news_station\n"})}),"\n",(0,t.jsx)(n.p,{children:"In a new terminal, source your workspace, and then run the smartphone node."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 run my_python_package smartphone\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You should see log messages in the terminal indicating that the smartphone node has started and is receiving messages from the ",(0,t.jsx)(n.code,{children:"robot_news"})," topic."]}),"\n",(0,t.jsx)(n.h5,{id:"7-testing-and-verification",children:"7. Testing and Verification"}),"\n",(0,t.jsxs)(n.p,{children:["Test the setup by observing the log messages from the smartphone node. You should see messages indicating that the node is receiving the broadcasts from the ",(0,t.jsx)(n.code,{children:"robot_news"})," station."]}),"\n",(0,t.jsx)(n.p,{children:"If you stop the publisher node, the subscriber node should remain active but will not receive any messages until the publisher node is restarted. This demonstrates the decoupled nature of ROS2 communication, where nodes interact through topic interfaces without being directly aware of each other."}),"\n",(0,t.jsx)(n.h4,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(n.p,{children:"This tutorial provided a comprehensive guide for creating a Python subscriber node in ROS2. By following these steps, you should be able to set up a functional subscriber node capable of receiving messages from a specified topic. This node can serve as a foundation for more complex functionalities, such as those typically handled by a smartphone in a robotic system."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);