"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[708],{5413:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"topics/publisher","title":"publisher","description":"ROS 2 Publisher Node Tutorial with Python","source":"@site/docs/03_topics/03_publisher.md","sourceDirName":"03_topics","slug":"/topics/publisher","permalink":"/ROS2-Beginners/docs/topics/publisher","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03_topics/03_publisher.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Topics","permalink":"/ROS2-Beginners/docs/topics/topics"},"next":{"title":"subscriber","permalink":"/ROS2-Beginners/docs/topics/subscriber"}}');var t=s(4848),o=s(8453);const r={},a=void 0,c={},l=[{value:"ROS 2 Publisher Node Tutorial with Python",id:"ros-2-publisher-node-tutorial-with-python",level:3},{value:"1. Setting Up the ROS 2 Workspace",id:"1-setting-up-the-ros-2-workspace",level:4},{value:"2. Create a Python Package",id:"2-create-a-python-package",level:4},{value:"3. Creating a Publisher Node",id:"3-creating-a-publisher-node",level:4},{value:"4. Writing the Publisher Node",id:"4-writing-the-publisher-node",level:4},{value:"5. Package Configuration",id:"5-package-configuration",level:4},{value:"6. Building the Package",id:"6-building-the-package",level:4},{value:"7. Running the Publisher Node",id:"7-running-the-publisher-node",level:4},{value:"8. Verifying the Publisher Node",id:"8-verifying-the-publisher-node",level:4},{value:"Conclusion",id:"conclusion",level:4}];function d(e){const n={code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"ros-2-publisher-node-tutorial-with-python",children:"ROS 2 Publisher Node Tutorial with Python"}),"\n",(0,t.jsx)(n.p,{children:"This tutorial provides a comprehensive guide to creating a publisher node in ROS 2 using Python. The goal is to set up a node that publishes messages to a topic, which other nodes can then subscribe to. This tutorial will cover setting up the environment, writing the publisher node, and verifying its functionality."}),"\n",(0,t.jsx)(n.h4,{id:"1-setting-up-the-ros-2-workspace",children:"1. Setting Up the ROS 2 Workspace"}),"\n",(0,t.jsx)(n.p,{children:"First, ensure your ROS 2 workspace is properly set up. Navigate to your ROS 2 workspace source directory:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\n"})}),"\n",(0,t.jsx)(n.h4,{id:"2-create-a-python-package",children:"2. Create a Python Package"}),"\n",(0,t.jsx)(n.p,{children:"If you haven't already created a Python package, do so now:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_python_package\n"})}),"\n",(0,t.jsx)(n.h4,{id:"3-creating-a-publisher-node",children:"3. Creating a Publisher Node"}),"\n",(0,t.jsxs)(n.p,{children:["Within the ",(0,t.jsx)(n.code,{children:"my_python_package"})," directory, create a new Python file for your publisher node:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd my_python_package/my_python_package\ntouch robot_news_station.py\nchmod +x robot_news_station.py\n"})}),"\n",(0,t.jsx)(n.h4,{id:"4-writing-the-publisher-node",children:"4. Writing the Publisher Node"}),"\n",(0,t.jsxs)(n.p,{children:["Open ",(0,t.jsx)(n.code,{children:"robot_news_station.py"})," in your preferred text editor and add the following code:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.msg import String\n\nclass RobotNewsStation(Node):\n    def __init__(self):\n        super().__init__('robot_news_station')\n        self.publisher_ = self.create_publisher(String, 'robot_news', 10)\n        self.timer = self.create_timer(0.5, self.publish_news)\n        self.get_logger().info('Robot News Station has been started.')\n        self.robot_name = 'C-3PO'\n\n    def publish_news(self):\n        msg = String()\n        msg.data = f'Hi, this is {self.robot_name} from the Robot News Station'\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = RobotNewsStation()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h4,{id:"5-package-configuration",children:"5. Package Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Ensure the necessary dependencies are declared in the ",(0,t.jsx)(n.code,{children:"setup.py"})," and ",(0,t.jsx)(n.code,{children:"package.xml"})," files."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"setup.py"}),":"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_python_package'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='TODO: Package description',\n    license='TODO: License declaration',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'robot_news_station = my_python_package.robot_news_station:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"package.xml"}),":"]})}),"\n",(0,t.jsxs)(n.p,{children:["Add the dependency for ",(0,t.jsx)(n.code,{children:"example_interfaces"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<package format="2">\n  <name>my_python_package</name>\n  <version>0.0.0</version>\n  <description>TODO: Package description</description>\n  <maintainer email="your_email@example.com">your_name</maintainer>\n  <license>TODO: License declaration</license>\n\n  <buildtool_depend>ament_cmake</buildtool_depend>\n  <build_depend>rclpy</build_depend>\n  <build_depend>example_interfaces</build_depend>\n  <exec_depend>rclpy</exec_depend>\n  <exec_depend>example_interfaces</exec_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,t.jsx)(n.h4,{id:"6-building-the-package",children:"6. Building the Package"}),"\n",(0,t.jsx)(n.p,{children:"Navigate to the root of your workspace and build the package:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\ncolcon build --packages-select my_python_package\n"})}),"\n",(0,t.jsx)(n.h4,{id:"7-running-the-publisher-node",children:"7. Running the Publisher Node"}),"\n",(0,t.jsx)(n.p,{children:"Source the workspace and run the node:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:". install/setup.bash\nros2 run my_python_package robot_news_station\n"})}),"\n",(0,t.jsx)(n.h4,{id:"8-verifying-the-publisher-node",children:"8. Verifying the Publisher Node"}),"\n",(0,t.jsx)(n.p,{children:"To verify that your node is publishing messages correctly, open a new terminal and use the following commands:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"List active nodes:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You should see ",(0,t.jsx)(n.code,{children:"robot_news_station"})," in the list."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"List active topics:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You should see ",(0,t.jsx)(n.code,{children:"/robot_news"})," in the list."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Echo topic messages:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /robot_news\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see the messages being published by your node, such as:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"data: 'Hi, this is C-3PO from the Robot News Station'\n"})}),"\n",(0,t.jsx)(n.h4,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(n.p,{children:["You have successfully created and run a ROS 2 publisher node using Python. This node publishes messages to the ",(0,t.jsx)(n.code,{children:"/robot_news"})," topic, which other nodes can subscribe to for receiving updates. This foundational knowledge is essential for building more complex ROS 2 systems."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var i=s(6540);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);