"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5415],{8851:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"topics/intro","title":"ROS 2 Topics","description":"Introduction","source":"@site/docs/03_topics/01_intro.md","sourceDirName":"03_topics","slug":"/topics/intro","permalink":"/docs/topics/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/03_topics/01_intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Topics","permalink":"/docs/category/topics"},"next":{"title":"ROS 2 Topics","permalink":"/docs/topics/topics"}}');var r=i(4848),t=i(8453);const l={},c="ROS 2 Topics",o={},a=[{value:"Introduction",id:"introduction",level:2},{value:"Conceptual Overview",id:"conceptual-overview",level:2},{value:"Real-Life Analogy",id:"real-life-analogy",level:3},{value:"Implementing ROS 2 Topics",id:"implementing-ros-2-topics",level:2},{value:"Python Implementation",id:"python-implementation",level:3},{value:"Publisher Node",id:"publisher-node",level:4},{value:"Subscriber Node",id:"subscriber-node",level:4},{value:"C++ Implementation",id:"c-implementation",level:3},{value:"Publisher Node",id:"publisher-node-1",level:4},{value:"Subscriber Node",id:"subscriber-node-1",level:4},{value:"Debugging and Monitoring ROS 2 Topics",id:"debugging-and-monitoring-ros-2-topics",level:2},{value:"Command-Line Tools",id:"command-line-tools",level:3},{value:"Graphical Tools",id:"graphical-tools",level:3},{value:"Experimenting with Turtlesim",id:"experimenting-with-turtlesim",level:2},{value:"Installing Turtlesim",id:"installing-turtlesim",level:3},{value:"Launching Turtlesim",id:"launching-turtlesim",level:3},{value:"Controlling Turtlesim via Topics",id:"controlling-turtlesim-via-topics",level:3},{value:"Practical Activity: Average Number Calculator",id:"practical-activity-average-number-calculator",level:2},{value:"Objective",id:"objective",level:3},{value:"Python Implementation",id:"python-implementation-1",level:3},{value:"Publisher Node",id:"publisher-node-2",level:4},{value:"Subscriber Node",id:"subscriber-node-2",level:4},{value:"Running the Activity",id:"running-the-activity",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-2-topics",children:"ROS 2 Topics"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"This tutorial provides an in-depth guide to ROS 2 topics, a fundamental communication mechanism in the ROS (Robot Operating System) framework. We will cover the conceptual foundations of ROS 2 topics, provide detailed instructions for creating publisher and subscriber nodes in both Python and C++, and introduce tools and techniques for debugging and monitoring topic communication. The tutorial concludes with a practical activity to consolidate your understanding."}),"\n",(0,r.jsx)(n.h2,{id:"conceptual-overview",children:"Conceptual Overview"}),"\n",(0,r.jsx)(n.p,{children:"In ROS 2, topics are the primary method for nodes (the basic unit of computation in ROS 2) to communicate with each other in a distributed system. A topic in ROS 2 is a named bus over which nodes exchange messages. This communication follows a publish/subscribe model:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Publisher"}),": A node that sends messages to a topic."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subscriber"}),": A node that receives messages from a topic."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This architecture decouples the communication between nodes, allowing for modularity and scalability in designing robotic systems. Multiple nodes can publish to and subscribe to the same topic, and nodes do not need to be aware of each other's existence, as long as they know the topic name."}),"\n",(0,r.jsx)(n.h3,{id:"real-life-analogy",children:"Real-Life Analogy"}),"\n",(0,r.jsx)(n.p,{children:"Consider a radio station as an analogy. The radio station (publisher) broadcasts on a specific frequency (topic). Anyone with a radio (subscriber) can tune in to that frequency and receive the broadcast. The radio station does not need to know who is listening, and the listeners do not need to know who is broadcasting, as long as they both agree on the frequency."}),"\n",(0,r.jsx)(n.h2,{id:"implementing-ros-2-topics",children:"Implementing ROS 2 Topics"}),"\n",(0,r.jsx)(n.h3,{id:"python-implementation",children:"Python Implementation"}),"\n",(0,r.jsx)(n.h4,{id:"publisher-node",children:"Publisher Node"}),"\n",(0,r.jsxs)(n.p,{children:["The following is a Python implementation of a minimal publisher node. This node publishes a message of type ",(0,r.jsx)(n.code,{children:"std_msgs/msg/String"})," to a topic named ",(0,r.jsx)(n.code,{children:"topic"})," every 0.5 seconds."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello, ROS 2!'\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Explanation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MinimalPublisher"})," is a class derived from ",(0,r.jsx)(n.code,{children:"rclpy.node.Node"}),". It defines a ROS 2 node with a publisher that sends a ",(0,r.jsx)(n.code,{children:"String"})," message to the ",(0,r.jsx)(n.code,{children:"topic"})," every 0.5 seconds."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"create_publisher"})," function creates the publisher, specifying the message type (",(0,r.jsx)(n.code,{children:"String"}),") and the topic name (",(0,r.jsx)(n.code,{children:"topic"}),"). The third argument, ",(0,r.jsx)(n.code,{children:"10"}),", is the queue size, which defines how many messages can be queued for sending."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"subscriber-node",children:"Subscriber Node"}),"\n",(0,r.jsxs)(n.p,{children:["The corresponding subscriber node listens to the ",(0,r.jsx)(n.code,{children:"topic"})," and logs the received messages."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Explanation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MinimalSubscriber"})," is another ROS 2 node class that subscribes to the ",(0,r.jsx)(n.code,{children:"topic"}),". It uses the ",(0,r.jsx)(n.code,{children:"create_subscription"})," function to define the subscriber, specifying the message type, topic name, and a callback function (",(0,r.jsx)(n.code,{children:"listener_callback"}),") that is invoked each time a message is received."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"c-implementation",children:"C++ Implementation"}),"\n",(0,r.jsx)(n.h4,{id:"publisher-node-1",children:"Publisher Node"}),"\n",(0,r.jsx)(n.p,{children:"The following C++ code implements a minimal publisher node that sends a string message to a topic every 500 milliseconds."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include <chrono>\n#include <memory>\n#include "rclcpp/rclcpp.hpp"\n#include "std_msgs/msg/string.hpp"\n\nusing namespace std::chrono_literals;\n\nclass MinimalPublisher : public rclcpp::Node {\npublic:\n    MinimalPublisher() : Node("minimal_publisher"), count_(0) {\n        publisher_ = this->create_publisher<std_msgs::msg::String>("topic", 10);\n        timer_ = this->create_wall_timer(500ms, std::bind(&MinimalPublisher::timer_callback, this));\n    }\n\nprivate:\n    void timer_callback() {\n        auto message = std_msgs::msg::String();\n        message.data = "Hello, ROS 2: " + std::to_string(count_++);\n        RCLCPP_INFO(this->get_logger(), "Publishing: \'%s\'", message.data.c_str());\n        publisher_->publish(message);\n    }\n\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\n    rclcpp::TimerBase::SharedPtr timer_;\n    size_t count_;\n};\n\nint main(int argc, char *argv[]) {\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MinimalPublisher>());\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Explanation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MinimalPublisher"})," is a class derived from ",(0,r.jsx)(n.code,{children:"rclcpp::Node"}),". It defines a ROS 2 node with a publisher that sends a ",(0,r.jsx)(n.code,{children:"String"})," message to the ",(0,r.jsx)(n.code,{children:"topic"})," every 500 milliseconds."]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"create_publisher"})," function initializes the publisher. The ",(0,r.jsx)(n.code,{children:"create_wall_timer"})," function creates a timer that calls the ",(0,r.jsx)(n.code,{children:"timer_callback"})," function at a fixed interval."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"subscriber-node-1",children:"Subscriber Node"}),"\n",(0,r.jsxs)(n.p,{children:["The corresponding subscriber node in C++ listens to the ",(0,r.jsx)(n.code,{children:"topic"})," and logs the received messages."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include <memory>\n#include "rclcpp/rclcpp.hpp"\n#include "std_msgs/msg/string.hpp"\n\nclass MinimalSubscriber : public rclcpp::Node {\npublic:\n    MinimalSubscriber() : Node("minimal_subscriber") {\n        subscription_ = this->create_subscription<std_msgs::msg::String>(\n            "topic", 10, std::bind(&MinimalSubscriber::topic_callback, this, std::placeholders::_1));\n    }\n\nprivate:\n    void topic_callback(const std_msgs::msg::String::SharedPtr msg) const {\n        RCLCPP_INFO(this->get_logger(), "I heard: \'%s\'", msg->data.c_str());\n    }\n\n    rclcpp::Subscription<std_msgs::msg::String>::SharedPtr subscription_;\n};\n\nint main(int argc, char *argv[]) {\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MinimalSubscriber>());\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Explanation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"MinimalSubscriber"})," is a C++ ROS 2 node class that subscribes to the ",(0,r.jsx)(n.code,{children:"topic"}),". The ",(0,r.jsx)(n.code,{children:"create_subscription"})," function is used to define the subscriber, specifying the message type, topic name, and a callback function (",(0,r.jsx)(n.code,{children:"topic_callback"}),") that is invoked each time a message is received."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"debugging-and-monitoring-ros-2-topics",children:"Debugging and Monitoring ROS 2 Topics"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 provides several command-line tools and graphical interfaces for debugging and monitoring topics."}),"\n",(0,r.jsx)(n.h3,{id:"command-line-tools",children:"Command-Line Tools"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Listing Active Topics"}),":\nTo list all active topics, use the following command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Displaying Topic Information"}),":\nTo display detailed information about a specific topic, use:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic info /topic\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Echoing Topic Messages"}),":\nTo view the messages being published on a specific topic, use:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /topic\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"graphical-tools",children:"Graphical Tools"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Visualizing Data with RQT"}),":\nRQT is a graphical tool in ROS 2 that allows you to visualize data from topics in real-time. Launch RQT with:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rqt\n"})}),"\n",(0,r.jsx)(n.p,{children:"Within RQT, you can add various plugins to visualize data, plot graphs, and monitor different aspects of your ROS 2 system."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"experimenting-with-turtlesim",children:"Experimenting with Turtlesim"}),"\n",(0,r.jsx)(n.p,{children:"Turtlesim is a popular ROS 2 package used to teach the basic concepts of ROS, including topics. It simulates a turtle that can be controlled by publishing messages to specific topics."}),"\n",(0,r.jsx)(n.h3,{id:"installing-turtlesim",children:"Installing Turtlesim"}),"\n",(0,r.jsx)(n.p,{children:"Before using Turtlesim, you need to install the package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install ros-foxy-turtlesim\n"})}),"\n",(0,r.jsx)(n.h3,{id:"launching-turtlesim",children:"Launching Turtlesim"}),"\n",(0,r.jsx)(n.p,{children:"Launch the Turtlesim simulation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run turtlesim turtlesim_node\n"})}),"\n",(0,r.jsx)(n.h3,{id:"controlling-turtlesim-via-topics",children:"Controlling Turtlesim via Topics"}),"\n",(0,r.jsxs)(n.p,{children:["You can control the turtle by publishing velocity commands to the ",(0,r.jsx)(n.code,{children:"/turtle1/cmd_vel"})," topic:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ros2 topic pub /turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"\n'})}),"\n",(0,r.jsx)(n.p,{children:"This command moves the turtle forward while rotating it."}),"\n",(0,r.jsx)(n.h2,{id:"practical-activity-average-number-calculator",children:"Practical Activity: Average Number Calculator"}),"\n",(0,r.jsx)(n.h3,{id:"objective",children:"Objective"}),"\n",(0,r.jsx)(n.p,{children:"Create a ROS 2 system where one node publishes randomly generated numbers, and another"}),"\n",(0,r.jsx)(n.p,{children:"node subscribes to these numbers and calculates their average."}),"\n",(0,r.jsx)(n.h3,{id:"python-implementation-1",children:"Python Implementation"}),"\n",(0,r.jsx)(n.h4,{id:"publisher-node-2",children:"Publisher Node"}),"\n",(0,r.jsxs)(n.p,{children:["The publisher node generates random floating-point numbers between 0 and 100 and publishes them to a topic named ",(0,r.jsx)(n.code,{children:"numbers"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\nimport random\n\nclass NumberPublisher(Node):\n    def __init__(self):\n        super().__init__('number_publisher')\n        self.publisher_ = self.create_publisher(Float64, 'numbers', 10)\n        timer_period = 1.0  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n    def timer_callback(self):\n        num = Float64()\n        num.data = random.uniform(0, 100)\n        self.publisher_.publish(num)\n        self.get_logger().info('Publishing: \"%f\"' % num.data)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    number_publisher = NumberPublisher()\n    rclpy.spin(number_publisher)\n    number_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h4,{id:"subscriber-node-2",children:"Subscriber Node"}),"\n",(0,r.jsxs)(n.p,{children:["The subscriber node listens to the ",(0,r.jsx)(n.code,{children:"numbers"})," topic, calculates the running average of the numbers received, and logs the current number along with the average."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\n\nclass NumberSubscriber(Node):\n    def __init__(self):\n        super().__init__('number_subscriber')\n        self.subscription = self.create_subscription(\n            Float64,\n            'numbers',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n        self.numbers = []\n\n    def listener_callback(self, msg):\n        self.numbers.append(msg.data)\n        avg = sum(self.numbers) / len(self.numbers)\n        self.get_logger().info('I heard: \"%f\" - Average: \"%f\"' % (msg.data, avg))\n\ndef main(args=None):\n    rclpy.init(args=args)\n    number_subscriber = NumberSubscriber()\n    rclpy.spin(number_subscriber)\n    number_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"running-the-activity",children:"Running the Activity"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Run the publisher node:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"python3 number_publisher.py\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Run the subscriber node:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"python3 number_subscriber.py\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Watch the output in the terminal to see the published numbers and their running average."}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"This tutorial has provided a comprehensive introduction to ROS 2 topics, covering both the theoretical concepts and practical implementation. You have learned how to create publisher and subscriber nodes in Python and C++, monitor and debug topics using ROS 2 tools, and interact with a simulated environment using Turtlesim. The practical activity has reinforced your understanding of inter-node communication in ROS 2, demonstrating how topics can be used to share and process data across a distributed system."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);